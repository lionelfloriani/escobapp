const Le=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))d(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const m of a.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&d(m)}).observe(document,{childList:!0,subtree:!0});function o(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function d(s){if(s.ep)return;s.ep=!0;const a=o(s);fetch(s.href,a)}};Le();let ge=document.getElementById("gameCount"),h=document.getElementById("roundCount"),v=document.getElementById("turnCount"),g=1,pe,L,t;fetch("https://us-central1-escob-app.cloudfunctions.net/app/api/stats").then(r=>{if(!r.ok)throw new Error("Network response was not ok");return r.json()}).then(r=>{const i=r.turns;v.innerHTML=i,t=i;const o=r.games;ge.innerHTML=o,pe=o;const d=r.rounds;h.innerHTML=d,L=d,be()}).catch(r=>{console.error("Fetch error:",r)});let b=document.getElementById("nameOne"),O=document.getElementById("winOne"),k=document.getElementById("pointsOne"),N=document.getElementById("roundsOne"),S=document.getElementById("totalRoundsOne"),D=document.getElementById("escobaOne"),R=document.getElementById("percentageCardsOne"),P=document.getElementById("cardsOne"),U=document.getElementById("totalCardsOne"),$=document.getElementById("percentageHeartsOne"),j=document.getElementById("heartsOne"),A=document.getElementById("totalHeartsOne"),F=document.getElementById("percentageSevensOne"),W=document.getElementById("sevensOne"),x=document.getElementById("totalSevensOne"),J=document.getElementById("percentageSevenHeartOne"),q=document.getElementById("sevenHeartOne"),G=document.getElementById("totalSevenHeartOne"),K=document.getElementById("nameTwo"),z=document.getElementById("winTwo"),Q=document.getElementById("pointsTwo"),V=document.getElementById("roundsTwo"),X=document.getElementById("totalRoundsTwo"),Y=document.getElementById("escobaTwo"),Z=document.getElementById("percentageCardsTwo"),_=document.getElementById("cardsTwo"),ee=document.getElementById("totalCardsTwo"),ne=document.getElementById("percentageHeartsTwo"),te=document.getElementById("heartsTwo"),re=document.getElementById("totalHeartsTwo"),ie=document.getElementById("percentageSevensTwo"),oe=document.getElementById("sevensTwo"),se=document.getElementById("totalSevensTwo"),ae=document.getElementById("percentageSevenHeartTwo"),le=document.getElementById("sevenHeartTwo"),ce=document.getElementById("totalSevenHeartTwo"),we=document.getElementById("percentageCardsDraw"),Me=document.getElementById("cardsDrawDisplay"),ye=document.getElementById("totalCardsDraw"),he=document.getElementById("percentageHeartsDraw"),ve=document.getElementById("heartsDrawDisplay"),Ee=document.getElementById("totalHeartsDraw"),Ie=document.getElementById("percentageSevensDraw"),fe=document.getElementById("sevensDrawDisplay"),Be=document.getElementById("totalSevensDraw");async function Ce(){try{const r=await fetch("https://us-central1-escob-app.cloudfunctions.net/app/api/users");if(!r.ok)throw new Error("Network response was not ok");return await r.json()}catch(r){throw console.error("Error fetching users data:",r),r}}let e={lili:{cards:0,hearts:0,sevens:0,sevenHeart:0,escoba:0,points:0,rounds:0,wins:0,name:""},cami:{cards:0,hearts:0,sevens:0,sevenHeart:0,escoba:0,points:0,rounds:0,wins:0,name:""}};async function be(){try{const r=await Ce(),[i,o]=r;await Promise.all([(async()=>{e.lili.cards=i.cards,e.lili.hearts=i.hearts,e.lili.sevens=i.sevens,e.lili.sevenHeart=i.sevenHeart,e.lili.escoba=i.escoba,e.lili.points=i.points,e.lili.wins=i.wins,e.lili.name=i.name,e.lili.rounds=i.rounds})(),(async()=>{e.cami.cards=o.cards,e.cami.hearts=o.hearts,e.cami.sevens=o.sevens,e.cami.sevenHeart=o.sevenHeart,e.cami.escoba=o.escoba,e.cami.points=o.points,e.cami.wins=o.wins,e.cami.name=o.name,e.cami.rounds=o.rounds})()]),Oe()}catch(r){console.error("Error:",r)}}function Oe(){let r,i,o,d,s,a,m,H;e.cami.wins>=e.lili.wins?(b.innerHTML=e.cami.name,O.innerHTML=e.cami.wins,k.innerHTML=e.cami.points,N.innerHTML=e.cami.rounds,S.innerHTML=L,D.innerHTML=e.cami.escoba,P.innerHTML=e.cami.cards,U.innerHTML=t,j.innerHTML=e.cami.hearts,A.innerHTML=t,W.innerHTML=e.cami.sevens,x.innerHTML=t,q.innerHTML=e.cami.sevenHeart,G.innerHTML=t,r=Math.floor(e.cami.cards*100/t),R.innerHTML=isNaN(r)?"0":r.toString(),i=Math.floor(e.cami.hearts*100/t),$.innerHTML=isNaN(i)?"0":i.toString(),o=Math.floor(e.cami.sevens*100/t),F.innerHTML=isNaN(o)?"0":o.toString(),d=Math.floor(e.cami.sevenHeart*100/t),J.innerHTML=isNaN(d)?"0":d.toString(),K.innerHTML=e.lili.name,z.innerHTML=e.lili.wins,Q.innerHTML=e.lili.points,V.innerHTML=e.lili.rounds,X.innerHTML=L,Y.innerHTML=e.lili.escoba,_.innerHTML=e.lili.cards,ee.innerHTML=t,te.innerHTML=e.lili.hearts,re.innerHTML=t,oe.innerHTML=e.lili.sevens,se.innerHTML=t,le.innerHTML=e.lili.sevenHeart,ce.innerHTML=t,s=Math.floor(e.lili.cards*100/t),Z.innerHTML=isNaN(s)?"0":s.toString(),a=Math.floor(e.lili.hearts*100/t),ne.innerHTML=isNaN(a)?"0":a.toString(),m=Math.floor(e.lili.sevens*100/t),ie.innerHTML=isNaN(m)?"0":m.toString(),H=Math.floor(e.lili.sevenHeart*100/t),ae.innerHTML=isNaN(H)?"0":H.toString()):(b.innerHTML=e.lili.name,O.innerHTML=e.lili.wins,k.innerHTML=e.lili.points,N.innerHTML=e.lili.rounds,S.innerHTML=L,D.innerHTML=e.lili.escoba,P.innerHTML=e.lili.cards,U.innerHTML=t,j.innerHTML=e.lili.hearts,A.innerHTML=t,W.innerHTML=e.lili.sevens,x.innerHTML=t,q.innerHTML=e.lili.sevenHeart,G.innerHTML=t,r=Math.floor(e.lili.cards*100/t),R.innerHTML=isNaN(r)?"0":r.toString(),i=Math.floor(e.lili.hearts*100/t),$.innerHTML=isNaN(i)?"0":i.toString(),o=Math.floor(e.lili.sevens*100/t),F.innerHTML=isNaN(o)?"0":o.toString(),d=Math.floor(e.lili.sevenHeart*100/t),J.innerHTML=isNaN(d)?"0":d.toString(),K.innerHTML=e.cami.name,z.innerHTML=e.cami.wins,Q.innerHTML=e.cami.points,V.innerHTML=e.cami.rounds,X.innerHTML=L,Y.innerHTML=e.cami.escoba,_.innerHTML=e.cami.cards,ee.innerHTML=t,te.innerHTML=e.cami.hearts,re.innerHTML=t,oe.innerHTML=e.cami.sevens,se.innerHTML=t,le.innerHTML=e.cami.sevenHeart,ce.innerHTML=t,s=Math.floor(e.cami.cards*100/t),Z.innerHTML=isNaN(s)?"0":s.toString(),a=Math.floor(e.cami.hearts*100/t),ne.innerHTML=isNaN(a)?"0":a.toString(),m=Math.floor(e.cami.sevens*100/t),ie.innerHTML=isNaN(m)?"0":m.toString(),H=Math.floor(e.cami.sevenHeart*100/t),ae.innerHTML=isNaN(H)?"0":H.toString());let f=Math.floor((t-(e.cami.cards+e.lili.cards))*100/t);we.innerHTML=isNaN(f)?"0":f.toString(),Me.innerHTML=t-(e.cami.cards+e.lili.cards),ye.innerHTML=t;let B=Math.floor((t-(e.cami.hearts+e.lili.hearts))*100/t);he.innerHTML=isNaN(B)?"0":B.toString(),ve.innerHTML=t-(e.cami.hearts+e.lili.hearts),Ee.innerHTML=t;let C=Math.floor((t-(e.cami.sevens+e.lili.sevens))*100/t);Ie.innerHTML=isNaN(C)?"0":C,fe.innerHTML=t-(e.cami.sevens+e.lili.sevens),Be.innerHTML=t}let ke=document.getElementById("cardsDraw"),Ne=document.getElementById("heartsDraw"),Se=document.getElementById("sevensDraw"),l=document.getElementById("scoreRoundCami"),De=document.getElementById("cardsCami"),Re=document.getElementById("heartsCami"),Pe=document.getElementById("sevensCami"),E=document.getElementById("sevenHeartCami"),M=document.getElementById("escobaCami"),c=document.getElementById("scoreRoundLili"),Ue=document.getElementById("cardsLili"),$e=document.getElementById("heartsLili"),je=document.getElementById("sevensLili"),I=document.getElementById("sevenHeartLili"),y=document.getElementById("escobaLili"),u=document.getElementById("turnButton"),T=document.getElementById("roundButton");T.style.backgroundColor="black";T.style.pointerEvents="none";let p=document.getElementById("gameButton");p.style.backgroundColor="black";p.style.pointerEvents="none";let n={lili:{cards:0,hearts:0,sevens:0,sevenHeart:0,escoba:0,points:0,rounds:0,win:0},cami:{cards:0,hearts:0,sevens:0,sevenHeart:0,escoba:0,points:0,rounds:0,win:0},turns:0,rounds:0,currentTurn:{pointsCami:0,pointsLili:0},roundOne:{pointsCami:0,pointsLili:0,winner:"blank"},roundTwo:{pointsCami:0,pointsLili:0,winner:"blank"},roundThree:{pointsCami:0,pointsLili:0,winner:"blank"}};function Ae(){De.checked&&(n.cami.cards+=1,n.currentTurn.pointsCami+=1),Re.checked&&(n.cami.hearts+=1,n.currentTurn.pointsCami+=1),Pe.checked&&(n.cami.sevens+=1,n.currentTurn.pointsCami+=1),E.checked&&(n.cami.sevenHeart+=1,n.currentTurn.pointsCami+=1),n.cami.escoba+=parseInt(M.value),n.currentTurn.pointsCami+=parseInt(M.value),Ue.checked&&(n.lili.cards+=1,n.currentTurn.pointsLili+=1),$e.checked&&(n.lili.hearts+=1,n.currentTurn.pointsLili+=1),je.checked&&(n.lili.sevens+=1,n.currentTurn.pointsLili+=1),I.checked&&(n.lili.sevenHeart+=1,n.currentTurn.pointsLili+=1),n.lili.escoba+=parseInt(y.value),n.currentTurn.pointsLili+=parseInt(y.value),n.turns+=1,l.innerHTML=n.currentTurn.pointsCami,c.innerHTML=n.currentTurn.pointsLili;let r=parseInt(v.innerHTML);v.innerHTML=r+1,ke.checked=!0,Ne.checked=!0,Se.checked=!0,I.checked=!1,E.checked=!1,M.value="0",y.value="0"}function de(){switch(T.style.backgroundColor="white",T.style.pointerEvents="auto",document.getElementById("preventClick").style.pointerEvents="none",u.style.pointerEvents="none",n.cami.rounds+=1,g){case 1:n.roundOne.pointsCami=parseInt(l.innerHTML),n.roundOne.pointsLili=parseInt(c.innerHTML),n.roundOne.winner="Cami";break;case 2:n.roundTwo.pointsCami=parseInt(l.innerHTML),n.roundTwo.pointsLili=parseInt(c.innerHTML),n.roundTwo.winner="Cami";break;case 3:n.roundThree.pointsCami=parseInt(l.innerHTML),n.roundThree.pointsLili=parseInt(c.innerHTML),n.roundThree.winner="Cami";break}u.style.backgroundColor="black"}function ue(){switch(T.style.backgroundColor="white",T.style.pointerEvents="auto",document.getElementById("preventClick").style.pointerEvents="none",u.style.pointerEvents="none",n.lili.rounds+=1,g){case 1:n.roundOne.pointsCami=parseInt(l.innerHTML),n.roundOne.pointsLili=parseInt(c.innerHTML),n.roundOne.winner="Lili";break;case 2:n.roundTwo.pointsCami=parseInt(l.innerHTML),n.roundTwo.pointsLili=parseInt(c.innerHTML),n.roundTwo.winner="Lili";break;case 3:n.roundThree.pointsCami=parseInt(l.innerHTML),n.roundThree.pointsLili=parseInt(c.innerHTML),n.roundThree.winner="Lili";break}u.style.backgroundColor="black"}u.addEventListener("click",function(){(E.checked||I.checked)&&(Ae(),parseInt(l.innerHTML)>=15&&parseInt(c.innerHTML)<15?de():parseInt(c.innerHTML)>=15&&parseInt(l.innerHTML)<15?ue():parseInt(l.innerHTML)>=15&&parseInt(c.innerHTML)>=15&&(parseInt(l.innerHTML)>parseInt(c.innerHTML)?de():parseInt(l.innerHTML)<parseInt(c.innerHTML)&&ue()))});function Fe(){n.currentTurn.pointsCami=0,n.currentTurn.pointsLili=0,l.innerHTML="0",c.innerHTML="0"}function me(){u.style.pointerEvents="none",u.style.backgroundColor="black",p.style.backgroundColor="white",p.style.pointerEvents="auto",document.getElementById("roundOneName").innerHTML=="Cami"?n.cami.win+=1:document.getElementById("roundOneName").innerHTML=="Lili"&&(n.lili.win+=1)}function Te(){u.style.pointerEvents="none",u.style.backgroundColor="black",p.style.backgroundColor="white",p.style.pointerEvents="auto",document.getElementById("roundThreeName").innerHTML=="Cami"?n.cami.win+=1:document.getElementById("roundThreeName").innerHTML=="Lili"&&(n.lili.win+=1)}T.addEventListener("click",function(){switch(T.style.backgroundColor="black",T.style.pointerEvents="none",document.getElementById("preventClick").style.pointerEvents="auto",u.style.pointerEvents="auto",u.style.backgroundColor="white",n.cami.points+=n.currentTurn.pointsCami,n.lili.points+=n.currentTurn.pointsLili,g){case 1:document.getElementById("roundOneName").innerHTML=n.roundOne.winner,document.getElementById("roundOneName").innerHTML=="Cami"?(document.getElementById("winRoundOne").innerHTML=n.roundOne.pointsCami,document.getElementById("looseRoundOne").innerHTML=n.roundOne.pointsLili):(document.getElementById("winRoundOne").innerHTML=n.roundOne.pointsLili,document.getElementById("looseRoundOne").innerHTML=n.roundOne.pointsCami);break;case 2:document.getElementById("roundTwoName").innerHTML=n.roundTwo.winner,document.getElementById("roundTwoName").innerHTML=="Cami"?(document.getElementById("winRoundTwo").innerHTML=n.roundTwo.pointsCami,document.getElementById("looseRoundTwo").innerHTML=n.roundTwo.pointsLili,document.getElementById("roundOneName").innerHTML=="Cami"&&me()):(document.getElementById("winRoundTwo").innerHTML=n.roundTwo.pointsLili,document.getElementById("looseRoundTwo").innerHTML=n.roundTwo.pointsCami,document.getElementById("roundOneName").innerHTML=="Lili"&&me());break;case 3:document.getElementById("roundThreeName").innerHTML=n.roundThree.winner,document.getElementById("roundThreeName").innerHTML=="Cami"?(document.getElementById("winRoundThree").innerHTML=n.roundThree.pointsCami,document.getElementById("looseRoundThree").innerHTML=n.roundThree.pointsLili,Te()):(document.getElementById("winRoundThree").innerHTML=n.roundThree.pointsLili,document.getElementById("looseRoundThree").innerHTML=n.roundThree.pointsCami,Te());break}g++,n.rounds+=1;let r=parseInt(h.innerHTML);h.innerHTML=r+1,Fe()});const w=async(r,i)=>{try{const o=await fetch(`https://us-central1-escob-app.cloudfunctions.net/app/api/users/update/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!o.ok)throw new Error(`Network response was not ok. Status: ${o.status}`);console.log(`Player ${r} data updated successfully`)}catch(o){console.error(`Error updating player ${r} data:`,o)}},He=async r=>{try{const i=await fetch("https://us-central1-escob-app.cloudfunctions.net/app/api/stats/update/0",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!i.ok)throw new Error(`Network response was not ok. Status: ${i.status}`);console.log("Stats data updated successfully"),location.reload()}catch(i){console.error("Error updating stats data:",i)}};p.addEventListener("click",function(){const r={cards:n.lili.cards+e.lili.cards,hearts:n.lili.hearts+e.lili.hearts,sevens:n.lili.sevens+e.lili.sevens,sevenHeart:n.lili.sevenHeart+e.lili.sevenHeart,escoba:n.lili.escoba+e.lili.escoba,points:n.lili.points+e.lili.points,rounds:n.lili.rounds+e.lili.rounds,wins:n.lili.win+e.lili.wins},i={cards:n.cami.cards+e.cami.cards,hearts:n.cami.hearts+e.cami.hearts,sevens:n.cami.sevens+e.cami.sevens,sevenHeart:n.cami.sevenHeart+e.cami.sevenHeart,escoba:n.cami.escoba+e.cami.escoba,points:n.cami.points+e.cami.points,rounds:n.cami.rounds+e.cami.rounds,wins:n.cami.win+e.cami.wins},o={games:pe+1,rounds:L+n.rounds,turns:t+n.turns};w(0,r),w(1,i),He(o)});document.getElementById("resetButton").addEventListener("click",function(){const r={cards:0,hearts:0,sevens:0,sevenHeart:0,escoba:0,points:0,rounds:0,wins:0},i={cards:0,hearts:0,sevens:0,sevenHeart:0,escoba:0,points:0,rounds:0,wins:0},o={games:0,rounds:0,turns:0};w(0,r),w(1,i),He(o)});
